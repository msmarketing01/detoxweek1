<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Detox Ladies – Week 2 Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { font-family: sans-serif; box-sizing: border-box; }
    body { background: #fdfaf8; padding-bottom: 100px; }
    .planner-box {
      background: white;
      border-radius: 10px;
      padding: 20px;
      margin: 20px auto;
      max-width: 600px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h2 {
      margin: 25px 0 10px;
      font-size: 20px;
      color: #aa6f39;
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
    }
    label {
      display: block;
      margin: 10px 0;
      font-size: 15px;
    }
    input[type="checkbox"] {
      transform: scale(1.2);
      margin-right: 10px;
      accent-color: #f1a8af;
    }
    button {
      background-color: #f1a8af;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      margin: 30px auto 0;
      display: block;
      cursor: pointer;
    }
    .message {
      color: green;
      font-size: 14px;
      margin-top: 10px;
      text-align: center;
      display: none;
    }
    .day-block { margin-bottom: 40px; }
    .day-title {
      font-size: 22px;
      margin-top: 40px;
    }
  </style>
</head>
<body>
<div id="planner"></div>

<script>
  const STORAGE_KEY = "planner_week2";
  const weekData = {
    Sunday: [["Ginger Hack", "Gut Tea", "Soup"], ["Daily Gratitude"], []],
    Monday: [["Ginger Hack", "Visualization"], ["Gut Tea", "Salad"], ["Daily Gratitude"]],
    Tuesday: [["Ginger Hack", "Guided Meditation"], ["Gut Tea", "Superfood Meal"], ["Daily Gratitude"]],
    Wednesday: [["Ginger Hack", "Visualization"], ["Gut Tea", "Soup"], ["Daily Gratitude"]],
    Thursday: [["Ginger Hack", "Visualization"], ["Gut Tea", "Salad"], ["Daily Gratitude"]],
    Friday: [["Ginger Hack", "Meditation"], ["Gut Tea", "Superfood Meal"], ["Daily Gratitude"]],
    Saturday: [["Ginger Hack"], ["Gut Tea", "Soup"], ["Daily Gratitude"]]
  };

  function saveProgress() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    const data = {};
    checkboxes.forEach(cb => data[cb.id] = cb.checked);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    document.querySelectorAll(".message").forEach(el => {
      el.style.display = "block";
      setTimeout(() => el.style.display = "none", 2000);
    });
  }

  function loadProgress() {
    const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");
    Object.entries(saved).forEach(([id, checked]) => {
      const cb = document.getElementById(id);
      if (cb) cb.checked = checked;
    });
  }

  function createPlanner() {
    const container = document.getElementById("planner");
    let count = 0;
    for (const [day, parts] of Object.entries(weekData)) {
      const box = document.createElement("div");
      box.className = "planner-box day-block";

      const title = document.createElement("div");
      title.className = "day-title";
      title.textContent = `📅 ${day}`;
      box.appendChild(title);

      const periods = ["☀️ Morning", "🍵 Afternoon", "🛏️ Before Bed"];
      periods.forEach((label, i) => {
        if (parts[i].length > 0) {
          const h2 = document.createElement("h2");
          h2.textContent = `${label} – ${day}`;
          box.appendChild(h2);
          parts[i].forEach((task, j) => {
            const id = `week2_${day.toLowerCase()}_${i}${j}`;
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = id;
            const lbl = document.createElement("label");
            lbl.appendChild(checkbox);
            lbl.append(task);
            box.appendChild(lbl);
          });
        }
      });

      const button = document.createElement("button");
      button.textContent = "Save Progress";
      button.onclick = saveProgress;
      box.appendChild(button);

      const msg = document.createElement("div");
      msg.className = "message";
      msg.textContent = "✔️ Progress saved!";
      box.appendChild(msg);

      container.appendChild(box);
      count++;
    }
  }

  window.onload = () => {
    createPlanner();
    loadProgress();
  };
</script>
</body>
</html>
